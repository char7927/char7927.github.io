<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script>
    function setUp() {
      sp_1 = document.getElementById('output_1');
      sp_2 = document.getElementById('output_2');
      sp_3 = document.getElementById('output_3');
      mot = [];
      mot_maxs = [];
      calibratin = true;
      cal_timeout = null;
      acting = false;
    }
    function ask() {
      if(DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission === "function") {
        DeviceMotionEvent.requestPermission();
      }
      window.addEventListener('devicemotion', (event) => {
        mot = [Math.abs(event.acceleration.x).toFixed(4),Math.abs(event.acceleration.y).toFixed(4),Math.abs(event.acceleration.z).toFixed(4)];
        sp_2.innerHTML = mot.toString();
        //sideways, up and down, back and forth
        if(calibratin) {
          if(mot_mins.length == 0) {
            mot_maxs = [Math.abs(event.acceleration.x).toFixed(4),Math.abs(event.acceleration.y).toFixed(4),Math.abs(event.acceleration.z).toFixed(4)];
          }else{
            mot_maxs = [Math.max(Math.abs(event.acceleration.x).toFixed(4),mot_maxs[0]),Math.max(Math.abs(event.acceleration.y).toFixed(4),mot_maxs[1]),Math.max(Math.abs(event.acceleration.z).toFixed(4),mot_maxs[2])];
          }
        }else{
          if(mot[0] > mot_maxs[0] || mot[1] > mot_maxs[1] || mot[2] > mot_maxs[2]) {
            console.log('hey');
          }
        }
      });
      cal_timeout = setTimeout(function() {
        calibratin = false;
        sp_3.innerHTML = mot_maxs.toString();
      }, 10000);
    }
    </script>
  </head>
  <body onload="setUp();">
    <h2>Information plus cal_mot</h2>
    <span id='output_1'>till 2</span><br />
    <span id='output_2'>till 2</span><br />
    <span id='output_3'>till 2</span><br />
    <button id='permission' onclick="ask();">Start</button>
  </body>
</html>
